const helpLib=(()=>{const e=[],t="_common",r=".";function n(e,r,n){if(null!==n)for(let s in n)if(!1===i.call(this,s,n[s])){throw new ReferenceError(`Not all dependencies are met for the helper function "${e===t?r:e+"."+r}"`)}}function i(e,n){if(e=(e=String(e).trim())===r?t:e,void 0===this.libList[e])return!1;n=String(n).split(",");for(let t in n)if(void 0===this.libList[e][n[t].trim()])return!1;return!0}return new class HelpLib{constructor(){this.isInitialize=!1,this.libList={},e.push(t);for(let t in this)e.push(t)}isInit(){return this.isInitialize}regHelper(i,s,l,c){if(i=(i=null==i?t:String(i).trim())===r?t:i,0==(s=String(s).trim()).length)throw new TypeError("The helper function name is empty");if("function"!=typeof c)throw new TypeError("The callback of helper is not a function");if(i===t){if(e.indexOf(s)>=0)throw new TypeError(`The helper function name "${s}" is reserved`);if(void 0!==this.libList[i]&&void 0!==this.libList[i][s])throw new TypeError(`The helper function name "${s}" is already exist`)}else{if(e.indexOf(i)>=0)throw new TypeError(`The library name "${i}" is reserved`);if(void 0!==this.libList[i]&&void 0!==this.libList[i][s])throw new TypeError(`The helper function name "${i}.${s}" is already exist`)}this.isInitialize&&null!==l&&"object"==typeof l&&n.call(this,i,s,l),this.libList[i]=void 0===this.libList[i]?{}:this.libList[i],this.libList[i][s]={callback:c.bind(this),dependence:null!==l&&"object"==typeof l?l:null},this.isInitialize&&(i===t?this[s]=this.libList[i][s].callback:(this[i]=void 0===this[i]?{}:this[i],this[i][s]=this.libList[i][s].callback))}init(){if(!1===this.isInitialize){for(let e in this.libList)for(let r in this.libList[e])n.call(this,e,r,this.libList[e][r].dependence),e===t?this[r]=this.libList[e][r].callback:(this[e]=void 0===this[e]?{}:this[e],this[e][r]=this.libList[e][r].callback);this.isInitialize=!0}}}})();(e=>{e.regHelper(".","isSet",null,function(e){return null!=e}),e.regHelper(".","isScalar",null,function(e){return/boolean|number|string/.test(typeof e)}),e.regHelper(".","isEmpty",null,function(e){if(0==this.isSet(e))return!0;switch(typeof e){case"boolean":return 0==e;case"number":return!(!isNaN(e)&&0!=e);case"string":return 0==e.trim().length;case"object":return 0==Object.keys(e).length;default:return!1}}),e.regHelper(".","isInstance",null,function(e,t,r=!1){if(this.isSet(t))t=null;else switch(typeof t){case"string":t=t.trim();break;case"object":t=t.constructor.name;break;case"function":t=t.name;break;default:t=null}if("object"==typeof e&&null!==t)for(;null!==e;){if(t===e.constructor.name)return!0;if(e=e.__proto__,r)break}return!1})})(helpLib),(e=>{e.regHelper("str","is",null,function(e){return"string"==typeof e}),e.regHelper("str","check",{".":"isSet"},function(e,t=""){return this.isSet(e)?String(e):t}),e.regHelper("str","trim",null,function(e){return this.str.check(e).trim()}),e.regHelper("str","clearDoubleSpace",null,function(e){return this.str.check(e).replace(/]\s\s+/g," ")}),e.regHelper("str","ucFirst",null,function(e){return 0==(e=this.str.check(e)).length?e:e[0].toUpperCase()+e.slice(1)}),e.regHelper("str","lcFirst",null,function(e){return 0==(e=this.str.check(e)).length?e:e[0].toLowerCase()+e.slice(1)}),e.regHelper("str","reverse",null,function(e){return(e=this.str.check(e)).split("").reverse().join("")}),e.regHelper("str","decodeHtmlEntity",null,function(e){return(e=this.str.check(e)).replace(/&#(\d+);/g,(e,t)=>String.fromCharCode(t))}),e.regHelper("str","encodeHtmlEntity",null,function(e){let t=[];for(let r=(e=this.str.check(e)).length-1;r>=0;r--)t.unshift(`&#${e[r].charCodeAt()};`);return t.join("")}),e.regHelper("str","test",null,function(e,t){try{return(t=t instanceof RegExp?t:new RegExp(t)).test(this.str.check(e))}catch(e){return!1}}),e.regHelper("str","isHostname",null,function(e){return this.str.test(e,/^[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)}),e.regHelper("str","isEmail",null,function(e){return this.str.test(e,new RegExp('^(("[\\w-\\s]+")|([\\w-]+(?:\\.[\\w-]+)*)|("[\\w-\\s]+")([\\w-]+(?:\\.[\\w-]+)*))(@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$)|(@\\[?((25[0-5]\\.|2[0-4][0-9]\\.|1[0-9]{2}\\.|[0-9]{1,2}\\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\]?$)',"i"))}),e.regHelper("str","isBlackList",{arr:"check"},function(e,t){let r=(t=this.arr.check(t)).length;for(let e=0;e<r;e++)t[e]=this.str.check(t[e]),t[e]=t[e].replace(/[\\^$*+?.()|[\]{}]/g,"\\$&");return this.str.test(e,"(?:"+t.join(")|(?:")+")")}),e.regHelper("str","clear",null,function(e,t){try{return e=this.str.check(e),t=t instanceof RegExp?t:new RegExp(t),e.replace(t,"")}catch(e){return!1}}),e.regHelper("str","clearLow",null,function(e,t){let r=t?"[\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F]+":"[\\x00-\\x1F\\x7F]+";return this.str.clear(e,new RegExp(r,"g"))}),e.regHelper("str","clearBlackList",{arr:"check"},function(e,t){let r=(t=this.arr.check(t)).length;for(let e=0;e<r;e++)t[e]=this.str.check(t[e]),t[e]=t[e].replace(/[\\^$*+?.()|[\]{}]/g,"\\$&");return this.str.clear(e,new RegExp("(?:"+t.join(")|(?:")+")","g"))})})(helpLib),(e=>{e.regHelper("num","is",null,function(e){switch(typeof e){case"number":return!0;case"string":return!isNaN(Number(e));default:return!1}}),e.regHelper("num","isInt",null,function(e){return!!this.num.is(e)&&Number(e)%1==0}),e.regHelper("num","check",null,function(e,t=0){return this.num.is(e)?Number(e):t}),e.regHelper("num","random",null,function(e=0,t=Number.MAX_SAFE_INTEGER){return e=this.num.check(e),t=this.num.check(t),Math.round(e-.5+Math.random()*(t-e+1))}),e.regHelper("num","format",{".":"isSet",str:"check"},function(e,t,r){let n=this.str.check(this.num.check(e).toFixed(this.num.check(r))).split(".");t=this.num.check(t)-n[0].length;let i="0".repeat(t=t<0?0:t)+n[0];return this.isSet(n[1])&&(i+="."+n[1]),i}),e.regHelper("num","inInterval",{".":"isSet"},function(e,t,r,n=null){return e=this.num.check(e),t=this.isSet(t)?this.num.check(t):null,r=this.isSet(r)?this.num.check(r):null,n=this.isSet(n)?this.num.check(n):null,null!==t&&e<t?null!==n&&n:null!==r&&e>r?null!==n&&n:null===n||e}),e.regHelper("num","toFlag",null,function(e){return Number(Boolean(e))})})(helpLib),(e=>{function t(t,r,n,i){e.obj.is(t)&&(e.isInstance(t," Set")?n("Set"):e.isInstance(t," Map")?n("Map"):e.isInstance(t," WeakSet")?i("WeakSet"):e.isInstance(t," WeakMap")?i("WeakMap"):r("Object"))}e.regHelper("obj","is",null,function(e){return"object"==typeof e&&null!==e}),e.regHelper("obj","isSet",{".":"isInstance"},function(e){return!(!this.obj.is(e)||!this.isInstance(e," Set"))}),e.regHelper("obj","isWeakSet",{".":"isInstance"},function(e){return!(!this.obj.is(e)||!this.isInstance(e," WeakSet"))}),e.regHelper("obj","isMap",{".":"isInstance"},function(e){return!(!this.obj.is(e)||!this.isInstance(e," Map"))}),e.regHelper("obj","isWeakMap",{".":"isInstance"},function(e){return!(!this.obj.is(e)||!this.isInstance(e," WeakMap"))}),e.regHelper("obj","isCollection",null,function(e){return!(!this.obj.isSet(e)&&!this.obj.isMap(e))}),e.regHelper("obj","isWeakCollection",null,function(e){return!(!this.obj.isWeakSet(e)&&!this.obj.isWeakMap(e))}),e.regHelper("obj","check",null,function(e,t={}){return this.obj.is(e)?e:t}),e.regHelper("obj","checkSet",null,function(e,t=new Set){return this.obj.isSet(e)?e:t}),e.regHelper("obj","checkWeakSet",null,function(e,t=new WeakSet){return this.obj.isWeakSet(e)?e:t}),e.regHelper("obj","checkMap",null,function(e,t=new Map){return this.obj.isMap(e)?e:t}),e.regHelper("obj","checkWeakMap",null,function(e,t=new WeakMap){return this.obj.isWeakMap(e)?e:t}),e.regHelper("obj","size",{".":"isInstance"},function(e){let r=0;return t(e,()=>r=Object.keys(e).length,()=>r=e.size),r}),e.regHelper("obj","forEach",{".":"isInstance",func:"is"},function(e,r){this.func.is(r)&&t(e,()=>{for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&r(e[t],t,e)},()=>e.forEach(r))}),e.regHelper("obj","toArray",{".":"isInstance"},function(e){let r=[];return t(e,()=>r=Object.values(e),()=>r=Array.from(e.values())),r}),e.regHelper("obj","copy",{".":"isInstance"},function(e){let r={};return t(e,()=>r=Object.assign({},e),t=>{r="Set"===t?new Set(e):new Map(e)}),r}),e.regHelper("obj","merge",{".":"isInstance"},function(...e){let r={},n="Object",i=(e,t)=>{switch(n){case"Object":r[e]=t;break;case"Set":r.add(t);break;case"Map":r.set(e,t)}};for(let s of e){let l=e[s];t(l,()=>{for(let e in l)Object.prototype.hasOwnProperty.call(l,e)&&i(e,l[e])},e=>{if(0===s&&(n=e,r="Set"===e?new Set:new Map),"Map"===e)for(let e of l)i(e[0],e[1]);else if("Set"===n)for(let e of l)i(null,e)})}return r})})(helpLib),(e=>{e.regHelper("arr","is",null,function(e){return"[object Array]"===Object.prototype.toString.call(e)}),e.regHelper("arr","check",null,function(e,t=[]){return this.arr.is(e)?e:t}),e.regHelper("arr","toArray",null,function(e){try{return Array.from(e)}catch(e){return[]}}),e.regHelper("arr","exist",null,function(e,t){return this.arr.check(e).indexOf(t)>=0}),e.regHelper("arr","copy",null,function(e){return this.arr.check(e).slice()}),e.regHelper("arr","proection",{".":"isSet",str:"trim",obj:"is, isMap"},function(e,t){let r=[];e=this.arr.check(e),t=this.str.trim(t);for(let n of e)if(this.obj.is(n)){let e=this.obj.isMap(n)?n.get(t):n[t];this.isSet(e)&&r.push(e)}return r}),e.regHelper("arr","shuffle",null,function(e){return e=this.arr.copy(e),list.sort(()=>Math.random()-.5)}),e.regHelper("arr","random",{num:"check"},function(e,t){let r=[];for(e=this.arr.copy(e),t=Math.floor(this.num.check(t));t>0&&e.length>0;){let n=Math.floor(Math.random()*e.length);r.push(e[n]),e.splice(n,1),t--}return r}),e.regHelper("arr","unique",null,function(e){return(e=this.arr.check(e)).filter((e,t,r)=>t==r.indexOf(e))}),e.regHelper("arr","toNumberArray",{num:"is, check"},function(e,t=!1){let r=[];for(var n of e=this.arr.check(e))(t||this.num.is(n))&&r.push(this.num.check(n));return r})})(helpLib),(e=>{e.regHelper("func","is",null,function(e){return"function"==typeof e}),e.regHelper("func","check",null,function(e,t=function(){}){return this.func.is(e)?e:t}),e.regHelper("func","apply",{".":"isSet",arr:"check"},function(e,t,r){return e=this.isSet(e)?e:null,this.func.check(t).apply(e,this.arr.check(r))}),e.regHelper("func","saveApply",{".":"isSet",arr:"check"},function(e,t,r,n){e=this.isSet(e)?e:null;try{return this.func.apply(e,t,this.arr.check(n))}catch(t){return this.func.check(r).call(e,t)}}),e.regHelper("func","call",null,function(e,t,...r){return this.func.apply(e,t,r)}),e.regHelper("func","saveCall",null,function(e,t,r,...n){return this.func.saveApply(e,t,r,n)})})(helpLib),(e=>{e.regHelper("date","is",null,function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e)}),e.regHelper("date","check",{".":"isInstance",str:"is",num:"is"},function(e,t=new Date){return this.isInstance(e,"Date",!0)?e:(this.num.is(e)||this.str.is(e))&&(e=new Date(e),0==isNaN(e))?e:t}),e.regHelper("date","getWeek",null,function(e){e=this.date.check(e);let t=new Date(e.getFullYear(),0,1);return Math.ceil(((e-t)/864e5+t.getDay()+1)/7)}),e.regHelper("date","getTimestamp",null,function(e=new Date){return(e=this.date.check(e)).getTime()}),e.regHelper("date","getUTCTimestamp",null,function(e=new Date){return e=this.date.check(e),(e=new Date(e.getTime()+6e4*e.getTimezoneOffset())).getTime()}),e.regHelper("date","getDateFromTimestamp",{num:"check"},function(e){return new Date(this.num.check(e))}),e.regHelper("date","getDateFromUTCTimestamp",{num:"check"},function(e){let t=new Date;return t.setTime(this.num.check(e)-6e4*t.getTimezoneOffset()),t})})(helpLib),helpLib.init();